{% load static from staticfiles %}
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Devis Madera</title>
    <style>
    /* Page */

    @page {
        size: a4 portrait;
        @frame header_frame { /*Static Frame*/
            -pdf-frame-content: header_content;
            left: 50pt; width: 512pt; top: 50pt; height: 200pt;
        }
        @frame content_frame { /*Content Frame*/
            left: 50pt; width: 512pt; top: 250pt; height: 632pt;
        }
        @frame footer_frame { /*Another static Frame*/
            -pdf-frame-content: footer_content;
            left: 50pt; width: 512pt; top: 772pt; height: 20pt;
        }
    }

    /* Helper */

    .bg-darkgrey {
        background-color: #7f8c8d;
    }

    /* Font */

    h1 {
        font-size: 3em;
    }

    /* HTML */

    .table {
        width: 100%;
        max-width: 100%;
        background-color: #fff;
    }

    .table th,
    .table td {
        padding: 5px;
        text-align: center;
        border: 2px solid #7f8c8d;
    }

    /* Métier */

    .client {
        text-decoration: underline;
        font-weight: bold;
        margin-bottom: 10px;

    }

    .list-group {
        display: block;
        width: 100%;
        list-style: none;
        line-height: 5px;
        font-size: 1.3em;
    }
    </style>
</head>
<body>
    <div id='header_content'>

        <div class="list-group">
            <img src="{% static "img/quote/logo.jpg" %}">
            <h1>Devis MADERA</h1>
            <p>REF : {{reference}}</p>
            <div>Date : {{today}}</div>
        </div>


        <div align="right" class="list-group">
            <div class="client">Client :</div>

            <div>Projet : {{name}}</div>
            <div>{{client.get_full_name}}</div>
            {%if client.company %}
                <div>{{client.company}}</div>
            {%endif%}
            <div>{{client.address.street}}</div>
            <div>{{client.address.zicode}} {{client.address.city}}</div>
            <div>{{client.phone}}</div>
            <div>{{client.email}}</div>
        </div>
    </div>

    <div id="footer_content">
        <div style="text-align: right">
            page <pdf:pagenumber> sur <pdf:pagecount>
        </div>
    </div>

    <table class="table">
            <thead>
            <tr>
                <th>Modules</th>
                <th>Composants</th>
                <th>Quantité</th>
                <th>Prix HT</th>
                <th>TVA</th>
                <th>Prix TTC</th>
            </tr>
            </thead>
            <tbody>
                {% for module in modules %}
                    {%for m in module %}
                    <tr>
                        <td>{{module.name}}</td>
                        <td>
                            {%for component in module.components.all %}
                                {{component}}
                            {%endfor%}
                        </td>
                        <td>1</td>
                        <td>{{module.priceHT}}</td>
                        <td>20 %</td>
                        <td>{{module.price}}</td>
                    </tr>
                    {%endfor%}
                {%endfor%}
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="4" class="bg-darkgrey"></td>
                    <th>Total TTC</th>
                    <td>{{quote.price}}</td>
                </tr>
            </tfoot>
    </table>

    <div style="text-align: justify; font-size: 8px; margin-top: 550px">
        Les informations recueillies vous concernant font l'objet d'un traitement qui a pour finalité : la relance client, la gestion des prospects, les statistiques de ventes, la fidélisation client.
        Le destinataire de ces données sont : l'entreprise Madera.
        La durée de conservation des données est de 5 ans.
        Vous bénéficiez d’un droit d’accès, de rectification, de portabilité, d’effacement de celles-ci ou une limitation du traitement.
        Vous pouvez vous opposer au traitement des données vous concernant et disposez du droit de retirer votre consentement à tout moment en vous adressant à : reclamations@madera.com
        Vous avez la possibilité d’introduire une réclamation auprès d’une autorité de contrôle
    </div>

</body>
</html>

